(function(){"use strict";var e={5947:function(e,t,r){var s=r(9963),a=r(6252);const o={class:"p-8 h-screen flex flex-col"};function n(e,t,r,s,n,c){const i=(0,a.up)("router-view"),l=(0,a.up)("items-list"),u=(0,a.up)("switch-page");return(0,a.wg)(),(0,a.iD)("section",o,[(0,a.Wm)(i),(0,a.Wm)(l,{list:e.list},null,8,["list"]),(0,a.Wm)(u)])}r(560);var c=r(3907);const i=Symbol(),l=(0,c.MT)({state:{repositoreis:[],searchInput:"",perPage:32,page:10,cahce:new Map},getters:{getCahce(e){return e.cahce},getsearchInput(e){return e.searchInput},getRepositories(e){return e.repositoreis},getPagesInfo(e){return{perPage:e.perPage,page:e.page,pagesTotal:Math.floor(e.repositoreis.total_count/e.perPage)}}},actions:{setPerPage(e,t){e.commit("setPerPage",t.perPage),t.search&&l.dispatch("searchRepositories")},setSearchInput(e,t){e.commit("setSearchInput",t.search),t.setPageDefault&&e.commit("setPageDefault"),l.dispatch("searchRepositories")},switchPage(e,t){e.commit("switchPage",t),l.dispatch("searchRepositories")},setPage(e,t){e.commit("setPage",t)},async searchRepositories(e){if(l.state.cahce.size>0)for(const[r,s]of l.getters.getCahce)if(r.page==l.state.page&&r.searchInput===l.state.searchInput&&r.perPage===l.state.perPage)return e.commit("searchRepositories",s),void console.log("got from cache");const t=await fetch(`https://api.github.com/search/repositories?q=${l.state.searchInput}&per_page=${l.state.perPage}&page=${l.state.page}`,{headers:{Accept:"application/vnd.github+json"}});if(t.ok){const r=await t.json();e.commit("searchRepositories",r),e.commit("setCache",[{page:l.state.page,searchInput:l.state.searchInput,perPage:l.state.perPage},l.state.repositoreis])}else{if(403===t.status)return void alert("Max API rate exceeded, wait a few seconds");alert(`Ошибка ${t.status}`)}}},mutations:{setPage(e,t){e.page=Number(t),console.log(t)},setCache(e,t){e.cahce.set(t[0],t[1])},setSearchInput(e,t){e.searchInput=t},setPerPage(e,t){e.perPage=Number(t)},setPageDefault(e){e.page=1},switchPage(e,t){1===t?e.page+=1:e.page>1&&(e.page-=1)},searchRepositories(e,t){e.repositoreis=t}}}),u={key:0,class:"bg-back xl:p-8 rounded-xl grid xl:grid-cols-4 gap-8 overflow-y-scroll scroll-m-1 border-4 border-transparent lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-1 sm:p-4"},p={key:1,class:"flex justify-center"};function g(e,t,r,s,o,n){const c=(0,a.up)("list-item");return e.repos&&e.repos.length>0?((0,a.wg)(),(0,a.iD)("ul",u,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.repos,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.id},[(0,a.Wm)(c,{item:e},null,8,["item"])])))),128))])):((0,a.wg)(),(0,a.iD)("p",p,"Ничего не найдено"))}var f=r(3577),h=r.p+"img/Star.53715c34.svg";const d={class:"flex bg-back rounded-xl flex-col xl:hover:scale-110 transition shadow-lg lg:hover:scale-105 md:hover:scale-105"},m={class:"flex p-4"},v={class:"con flex justify-between w-full"},P={class:"mb-3 font-medium font-Roboto"},w=["href"],b={class:"mb-3 font-light font-Roboto"},y={class:"flex font-normal font-Roboto"},_=["src"],I=["href"],x={class:"flex items-start"},R=(0,a._)("img",{src:h,class:"mr-1 w-"},null,-1),k={class:"flex p-4 bg-secondary rounded-b-xl flex-col items-center font-Roboto"},D={key:0},j={key:1},q={key:2};function O(e,t,r,s,o,n){return(0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("div",m,[(0,a._)("div",v,[(0,a._)("div",null,[(0,a._)("div",P,[(0,a._)("a",{href:e.repoUrl},(0,f.zw)(e.name),9,w)]),(0,a._)("div",b,[(0,a._)("a",null,(0,f.zw)(e.language),1)]),(0,a._)("div",y,[(0,a._)("img",{src:e.avatar,class:"h-8 w-8 rounded-full mr-2.5 items-center"},null,8,_),(0,a._)("a",{class:"flex items-center",href:e.authorUrl},(0,f.zw)(e.owner),9,I)])]),(0,a._)("div",x,[R,(0,a._)("p",null,(0,f.zw)(e.stars),1)])])]),(0,a._)("div",k,[e.description?((0,a.wg)(),(0,a.iD)("p",D,"Описание")):(0,a.kq)("",!0),e.description?((0,a.wg)(),(0,a.iD)("p",j,(0,f.zw)(e.description),1)):((0,a.wg)(),(0,a.iD)("p",q,"Нет описания"))])])}var S=r(2262),Z=(0,a.aZ)({props:["item"],setup(e){const t=(0,S.qj)(e.item);return{name:t.name,owner:t.owner.login,repoUrl:t.html_url,authorUrl:t.owner.html_url,avatar:t.owner.avatar_url,description:t.description,language:t.language,stars:t.stargazers_count}}}),z=r(3744);const C=(0,z.Z)(Z,[["render",O]]);var U=C,T=(0,a.aZ)({components:{ListItem:U},props:["list"],setup(e){const t=(0,a.Fl)((function(){return e.list.items}));return{repos:t}}});const M=(0,z.Z)(T,[["render",g],["__scopeId","data-v-af347696"]]);var F=M,W=r.p+"img/arrow.405b411e.svg";const $={key:0,class:"flex w-full font-Roboto font-medium"},H={class:"w-fit bg-primary rounded-xl mt-3 flex flex-col items-center p-2"},A={class:"flex justify-center"},L={class:"inline"},N={class:"inline"},V=(0,a._)("option",null,"8",-1),E=(0,a._)("option",null,"16",-1),K=(0,a._)("option",null,"32",-1),Q=[V,E,K];function Y(e,t,r,o,n,c){return e.pagesInfo.pagesTotal>1?((0,a.wg)(),(0,a.iD)("div",$,[(0,a._)("div",H,[(0,a._)("div",A,[(0,a._)("img",{src:W,class:"rotate-180 mr-5 cursor-pointer",onClick:t[0]||(t[0]=t=>e.switchPage(2))}),(0,a._)("p",L,(0,f.zw)(e.pagesInfo.page)+" из "+(0,f.zw)(e.pagesInfo.pagesTotal),1),(0,a._)("img",{src:W,class:"ml-5 cursor-pointer",onClick:t[1]||(t[1]=t=>e.switchPage(1))})]),(0,a._)("p",N,[(0,a.wy)((0,a._)("select",{class:"bg-secondary outline-none","onUpdate:modelValue":t[2]||(t[2]=t=>e.perPageInput=t),onChange:t[3]||(t[3]=(...t)=>e.setPerPage&&e.setPerPage(...t))},Q,544),[[s.bM,e.perPageInput]]),(0,a.Uk)(" На странице ")])])])):(0,a.kq)("",!0)}var B=r(522),G=(0,a.aZ)({setup(){const e=(0,c.oR)(i),t=(0,S.iH)(16),r=(0,a.Fl)((function(){return e.getters.getPagesInfo}));function s(){e.dispatch("setPerPage",{perPage:t.value,search:!0})}(0,a.m0)((()=>{t.value=e.getters.getPagesInfo.perPage}));const o=(0,B.Z)((t=>{e.dispatch("switchPage",t)}),300);return{perPageInput:t,switchPage:o,pagesInfo:r,setPerPage:s}}});const J=(0,z.Z)(G,[["render",Y]]);var X=J,ee=r(2201),te=(0,a.aZ)({components:{ItemsList:F,SwitchPage:X},setup(){const e=(0,c.oR)(i),t=(0,ee.tv)();(0,a.ic)((()=>{t.push({path:"/",query:{q:e.getters.getsearchInput,page:e.getters.getPagesInfo.page,perPage:e.getters.getPagesInfo.perPage}})}));const r=(0,a.Fl)((function(){return e.getters.getRepositories}));return{list:r}}});const re=(0,z.Z)(te,[["render",n]]);var se=re;const ae={class:"bg-primary rounded-xl p-4 w-fit h-fit mb-3 font-Roboto font-medium"};function oe(e,t,r,o,n,c){const i=(0,a.Q2)("debounce");return(0,a.wg)(),(0,a.iD)("div",ae,[(0,a.wy)((0,a._)("input",{placeholder:"Search",class:"outline-none bg-secondary rounded-xl pl-2 p-1 font-Roboto color-secondary w-fit","onUpdate:modelValue":t[0]||(t[0]=t=>e.searchInput=t)},null,512),[[s.nr,e.searchInput],[i,e.setSearch,"300ms"]])])}var ne=(0,a.aZ)({setup(){const e=(0,c.oR)(i),t=(0,S.iH)(""),r=(0,ee.tv)();function s(){t.value.length>0&&e.dispatch("setSearchInput",{search:t.value,setPageDefault:!0})}return(0,a.bv)((()=>{t.value=String(r.currentRoute.value.query.q),e.dispatch("setPerPage",{perPage:r.currentRoute.value.query.perPage,serach:!1}),e.dispatch("setPage",r.currentRoute.value.query.page),e.dispatch("setSearchInput",{search:r.currentRoute.value.query.q,setPageDefault:!1})})),{setSearch:s,searchInput:t}}});const ce=(0,z.Z)(ne,[["render",oe]]);var ie=ce;const le=[{path:"/",component:ie}],ue=(0,ee.p7)({history:(0,ee.PO)("github-search-app/"),routes:le});var pe=ue,ge=r(7432);const fe=(0,s.ri)(se);fe.use(l,i),fe.use(pe),fe.directive("debounce",(0,ge.ZP)({lock:!0})),fe.mount("#app")}},t={};function r(s){var a=t[s];if(void 0!==a)return a.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,r),o.exports}r.m=e,function(){var e=[];r.O=function(t,s,a,o){if(!s){var n=1/0;for(u=0;u<e.length;u++){s=e[u][0],a=e[u][1],o=e[u][2];for(var c=!0,i=0;i<s.length;i++)(!1&o||n>=o)&&Object.keys(r.O).every((function(e){return r.O[e](s[i])}))?s.splice(i--,1):(c=!1,o<n&&(n=o));if(c){e.splice(u--,1);var l=a();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[s,a,o]}}(),function(){r.d=function(e,t){for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.p="github-search-app/"}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,o,n=s[0],c=s[1],i=s[2],l=0;if(n.some((function(t){return 0!==e[t]}))){for(a in c)r.o(c,a)&&(r.m[a]=c[a]);if(i)var u=i(r)}for(t&&t(s);l<n.length;l++)o=n[l],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(u)},s=self["webpackChunkgithub_search"]=self["webpackChunkgithub_search"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=r.O(void 0,[998],(function(){return r(5947)}));s=r.O(s)})();
//# sourceMappingURL=app.e2b4ad79.js.map